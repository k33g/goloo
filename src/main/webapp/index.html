<!DOCTYPE html>
<html>
<head>
    <title>GolOO</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <style>
        body {
            position: relative;
            padding-top: 70px; /* fixed navbar */
        }
    </style>
<body>

    <div class="navbar navbar-inverse navbar-fixed-top" style="background-color: #357ebd;">
        <span class="navbar-brand" style="color: #ffffff;">GolOO ?</span>
        <ul class="nav navbar-nav">
            <li><a style="color: #ffffff;" href="#">minimalistic golo web framework for Google App Engine Java</a></li>
            <!--<li><a style="color: #ffffff;" href="#">somewhere ...</a></li>-->
        </ul>

    </div>

    <div class="container">

            <blockquote>
                <p>Why <b>GolOO</b> ? Because it reminds me of <b>Golu</b> (Corsica translation of <b>Golo</b>)</p>
            </blockquote>

        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Technical stack</h3>
            </div>
            <ul>
                <li>Java
                    <ul>
                        <li>Golo</li>
                        <li>Jackson</li>
                    </ul>
                </li>
                <li>Javascript
                    <ul>
                        <li>Backbone</li>
                        <li>Underscore</li>
                        <li>jQuery</li>
                        <li>YepNope</li>
                    </ul>
                </li>
                <li>HTML / CSS
                    <ul>
                        <li>Bootstrap 3</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Source code</h3>
            </div>
            <a href="https://github.com/k33g/goloo">https://github.com/k33g/goloo</a>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Routes</h3>
            </div>
            <pre><code>
match {
    when http:route():equals("GET:/humans") then humans():getAll(http)
    when http:route():equals("POST:/humans") then humans():insert(http)
    when http:route():startsWith("GET:/hello/") then sayHello(http)
    otherwise http:writeToJson( map[["message","404!"]] )
}
            </code></pre>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Controllers</h3>
            </div>
            <pre><code>
function humans = -> DynamicObject()
    :getAll(|this, http| {
        http:writeToJson(array[
            map[["firstName","Bob"],["lastName","Morane"]],
            map[["firstName","John"],["lastName","Doe"]],
            map[["firstName","Jane"],["lastName","Doe"]]
        ])
    })
    :insert(|this, http| {

        let h = http:dataToMap()

        println(h:get("firstName"))
        println(h:get("lastName"))

        let datastore = Store():service()

        let human = Store():entity("human")

        human:setProperty("firstName", h:get("firstName"))
        human:setProperty("lastName", h:get("lastName"))
        human:setProperty("when", java.util.Date())
        human:setProperty("id", java.util.UUID.randomUUID():toString())

        datastore:put(human)

        http:writeToJson(human:getProperties())
    })
            </code></pre>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Client</h3>
            </div>
            <pre><code>
//GET request
$.ajax({
      type:"GET"
    , url:"/humans"
    , success:function(data){console.log(data)}
})

//POST request
$.ajax({
      type:"POST"
    , url:"/humans"
    , data:'{"firstName":"John", "lastName":"Doe"}'
    , success:function(data){console.log(data)}
})
            </code></pre>
        </div>

    </div>

    <script src="js/vendors/yepnope.1.5.4-min.js"></script>

    <script>

        yepnope({
            load : [
                "bootstrap3/css/bootstrap.min.css",
                "js/vendors/jquery-1.9.1.min.js",
                "bootstrap3/js/bootstrap.min.js",
                "js/vendors/underscore-min.js",
                "js/vendors/backbone-min.js",
                "js/lazyview.js",
                "js/namespace.js",
                "js/views/application.view.js",
                "js/routers/main.router.js"
            ],
            complete : function() {
                console.log("All scripts loaded, starting application")
                yepnope("js/application.js")

            }
        })

    </script>
</body>
</html>
